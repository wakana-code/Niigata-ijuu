<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ–°æ½Ÿç§»ä½ãƒãƒƒãƒãƒ³ã‚° | NIIGATA LIFE</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        * { font-family: 'Noto Sans JP', sans-serif; }
        
        :root {
            --niigata-blue: #1e40af;
            --niigata-light-blue: #3b82f6;
            --niigata-snow: #f8fafc;
            --niigata-gold: #d97706;
            --niigata-green: #15803d;
        }
        
        .gradient-niigata {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 50%, #0ea5e9 100%);
        }
        
        .text-shadow { text-shadow: 2px 2px 4px rgba(0,0,0,0.3); }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .snow-pattern {
            background-image: radial-gradient(circle, #fff 1px, transparent 1px);
            background-size: 30px 30px;
        }
        
        /* Game styles */
        #gameCanvas {
            background: linear-gradient(180deg, #0369a1 0%, #0284c7 50%, #0ea5e9 100%);
        }
        
        .wave-animation {
            animation: wave 2s ease-in-out infinite;
        }
        @keyframes wave {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        
        .river-flow {
            animation: flow 1s linear infinite;
        }
        @keyframes flow {
            from { background-position: 0 0; }
            to { background-position: 0 50px; }
        }
        
        .pulse-gold {
            animation: pulseGold 2s ease-in-out infinite;
        }
        @keyframes pulseGold {
            0%, 100% { box-shadow: 0 0 0 0 rgba(217, 119, 6, 0.4); }
            50% { box-shadow: 0 0 20px 10px rgba(217, 119, 6, 0.2); }
        }

        .scroll-hidden::-webkit-scrollbar { display: none; }
        .scroll-hidden { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="bg-slate-50 min-h-screen">
    <!-- Header -->
    <header class="gradient-niigata text-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex items-center justify-between h-16">
                <a href="#" onclick="showPage('home')" class="flex items-center space-x-2">
                    <span class="text-2xl">ğŸŒ¾</span>
                    <span class="font-bold text-xl">NIIGATA LIFE</span>
                </a>
                
                <!-- Desktop Nav -->
                <nav class="hidden md:flex space-x-6">
                    <a href="#" onclick="showPage('home')" class="hover:text-amber-300 transition">ãƒ›ãƒ¼ãƒ </a>
                    <a href="#" onclick="showPage('matching')" class="hover:text-amber-300 transition">ãƒãƒƒãƒãƒ³ã‚°è¨ºæ–­</a>
                    <a href="#" onclick="showPage('cities')" class="hover:text-amber-300 transition">å¸‚ç”ºæ‘ä¸€è¦§</a>
                    <a href="#" onclick="showPage('about')" class="hover:text-amber-300 transition">æ–°æ½Ÿã«ã¤ã„ã¦</a>
                    <button onclick="startGame()" class="bg-amber-500 hover:bg-amber-600 px-4 py-1 rounded-full font-medium transition pulse-gold">
                        ğŸš£ ãƒŸãƒ‹ã‚²ãƒ¼ãƒ 
                    </button>
                </nav>
                
                <!-- Mobile Menu Button -->
                <button onclick="toggleMobileMenu()" class="md:hidden text-2xl">â˜°</button>
            </div>
        </div>
        
        <!-- Mobile Nav -->
        <div id="mobileMenu" class="hidden md:hidden bg-blue-900 pb-4">
            <a href="#" onclick="showPage('home'); toggleMobileMenu()" class="block px-4 py-2 hover:bg-blue-800">ãƒ›ãƒ¼ãƒ </a>
            <a href="#" onclick="showPage('matching'); toggleMobileMenu()" class="block px-4 py-2 hover:bg-blue-800">ãƒãƒƒãƒãƒ³ã‚°è¨ºæ–­</a>
            <a href="#" onclick="showPage('cities'); toggleMobileMenu()" class="block px-4 py-2 hover:bg-blue-800">å¸‚ç”ºæ‘ä¸€è¦§</a>
            <a href="#" onclick="showPage('about'); toggleMobileMenu()" class="block px-4 py-2 hover:bg-blue-800">æ–°æ½Ÿã«ã¤ã„ã¦</a>
            <button onclick="startGame(); toggleMobileMenu()" class="mx-4 mt-2 bg-amber-500 px-4 py-2 rounded-full w-[calc(100%-2rem)]">
                ğŸš£ ãƒŸãƒ‹ã‚²ãƒ¼ãƒ 
            </button>
        </div>
    </header>

    <!-- Main Content -->
    <main id="mainContent">
        <!-- Home Page -->
        <div id="homePage" class="page">
            <!-- Hero Section -->
            <section class="relative h-[70vh] min-h-[500px] gradient-niigata overflow-hidden">
                <div class="absolute inset-0 snow-pattern opacity-10"></div>
                <div class="absolute inset-0 flex items-center justify-center">
                    <div class="text-center text-white px-4 fade-in">
                        <h1 class="text-4xl md:text-6xl font-bold mb-4 text-shadow">
                            æ–°æ½Ÿã§ã€<br class="md:hidden">æ–°ã—ã„æš®ã‚‰ã—ã‚’ã€‚
                        </h1>
                        <p class="text-xl md:text-2xl mb-8 opacity-90">
                            é›ªå›½ã®æ¸©ã‚‚ã‚Šã€æ—¥æœ¬æµ·ã®æµã¿ã€è±Šã‹ãªè‡ªç„¶ãŒã‚ãªãŸã‚’å¾…ã£ã¦ã„ã¾ã™
                        </p>
                        <div class="flex flex-col sm:flex-row gap-4 justify-center">
                            <button onclick="showPage('matching')" class="bg-amber-500 hover:bg-amber-600 text-white px-8 py-4 rounded-full text-lg font-bold transition transform hover:scale-105 shadow-lg">
                                ğŸ¯ ç§»ä½å…ˆè¨ºæ–­ã‚’ã¯ã˜ã‚ã‚‹
                            </button>
                            <button onclick="showPage('cities')" class="bg-white/20 hover:bg-white/30 backdrop-blur text-white px-8 py-4 rounded-full text-lg font-medium transition border border-white/30">
                                ğŸ“ å¸‚ç”ºæ‘ã‚’æ¢ã™
                            </button>
                        </div>
                    </div>
                </div>
                <div class="absolute bottom-0 left-0 right-0 h-20 bg-gradient-to-t from-slate-50 to-transparent"></div>
            </section>
            
            <!-- Features Section -->
            <section class="py-16 px-4 max-w-7xl mx-auto">
                <h2 class="text-3xl font-bold text-center mb-12 text-blue-900">æ–°æ½Ÿç§»ä½ã®é­…åŠ›</h2>
                <div class="grid md:grid-cols-3 gap-8">
                    <div class="bg-white rounded-2xl p-8 shadow-lg card-hover text-center">
                        <div class="text-5xl mb-4">ğŸŒŠ</div>
                        <h3 class="text-xl font-bold text-blue-900 mb-3">æ—¥æœ¬æµ·ã®æµã¿</h3>
                        <p class="text-gray-600">æ–°é®®ãªæµ·ã®å¹¸ã¨ç¾ã—ã„å¤•æ—¥ã€‚æµ·æ²¿ã„ã®æš®ã‚‰ã—ã§å¿ƒè±Šã‹ãªæ¯æ—¥ã‚’ã€‚</p>
                    </div>
                    <div class="bg-white rounded-2xl p-8 shadow-lg card-hover text-center">
                        <div class="text-5xl mb-4">ğŸ”ï¸</div>
                        <h3 class="text-xl font-bold text-blue-900 mb-3">é›„å¤§ãªè‡ªç„¶</h3>
                        <p class="text-gray-600">è¶Šå¾Œå±±è„ˆã«æŠ±ã‹ã‚ŒãŸè±Šã‹ãªè‡ªç„¶ã€‚å››å­£æŠ˜ã€…ã®ç¾ã—ã•ã‚’å ªèƒ½ã§ãã¾ã™ã€‚</p>
                    </div>
                    <div class="bg-white rounded-2xl p-8 shadow-lg card-hover text-center">
                        <div class="text-5xl mb-4">ğŸš</div>
                        <h3 class="text-xl font-bold text-blue-900 mb-3">é£Ÿã®ç‹å›½</h3>
                        <p class="text-gray-600">ã‚³ã‚·ãƒ’ã‚«ãƒªã€æ—¥æœ¬é…’ã€ã¸ããã°ã€‚æ—¥æœ¬ä¸€ã®ç±³ã©ã“ã‚ã§ç¾é£Ÿä¸‰æ˜§ã€‚</p>
                    </div>
                </div>
            </section>
            
            <!-- Popular Cities -->
            <section class="py-16 px-4 bg-gradient-to-b from-blue-50 to-white">
                <div class="max-w-7xl mx-auto">
                    <h2 class="text-3xl font-bold text-center mb-12 text-blue-900">äººæ°—ã®ç§»ä½å…ˆ</h2>
                    <div id="popularCities" class="grid md:grid-cols-4 gap-6"></div>
                    <div class="text-center mt-8">
                        <button onclick="showPage('cities')" class="text-blue-600 hover:text-blue-800 font-medium">
                            ã™ã¹ã¦ã®å¸‚ç”ºæ‘ã‚’è¦‹ã‚‹ â†’
                        </button>
                    </div>
                </div>
            </section>
        </div>
        
        <!-- Matching Page -->
        <div id="matchingPage" class="page hidden">
            <div class="max-w-3xl mx-auto px-4 py-12">
                <div id="quizContainer">
                    <div class="text-center mb-8">
                        <h1 class="text-3xl font-bold text-blue-900 mb-4">ğŸ¯ ç§»ä½å…ˆãƒãƒƒãƒãƒ³ã‚°è¨ºæ–­</h1>
                        <p class="text-gray-600">8ã¤ã®è³ªå•ã«ç­”ãˆã¦ã€ã‚ãªãŸã«ã´ã£ãŸã‚Šã®ç§»ä½å…ˆã‚’è¦‹ã¤ã‘ã¾ã—ã‚‡ã†ï¼</p>
                    </div>
                    
                    <!-- Progress Bar -->
                    <div class="mb-8">
                        <div class="flex justify-between text-sm text-gray-500 mb-2">
                            <span>è³ªå• <span id="currentQ">1</span> / 8</span>
                            <span id="progressPercent">0%</span>
                        </div>
                        <div class="h-3 bg-gray-200 rounded-full overflow-hidden">
                            <div id="progressBar" class="h-full bg-gradient-to-r from-blue-500 to-cyan-400 transition-all duration-500" style="width: 0%"></div>
                        </div>
                    </div>
                    
                    <!-- Question Area -->
                    <div id="questionArea" class="bg-white rounded-2xl shadow-xl p-8 fade-in"></div>
                </div>
                
                <!-- Results Area -->
                <div id="resultsArea" class="hidden"></div>
            </div>
        </div>
        
        <!-- Cities Page -->
        <div id="citiesPage" class="page hidden">
            <div class="max-w-7xl mx-auto px-4 py-12">
                <h1 class="text-3xl font-bold text-center text-blue-900 mb-4">ğŸ“ æ–°æ½ŸçœŒ å¸‚ç”ºæ‘ä¸€è¦§</h1>
                <p class="text-center text-gray-600 mb-8">ã‚ãªãŸã®æ–°ã—ã„æ•…éƒ·ã‚’è¦‹ã¤ã‘ã¦ãã ã•ã„</p>
                
                <!-- Filter -->
                <div class="flex flex-wrap justify-center gap-2 mb-8">
                    <button onclick="filterCities('all')" class="filter-btn px-4 py-2 rounded-full bg-blue-600 text-white">ã™ã¹ã¦</button>
                    <button onclick="filterCities('sea')" class="filter-btn px-4 py-2 rounded-full bg-gray-200 hover:bg-gray-300">æµ·æ²¿ã„</button>
                    <button onclick="filterCities('mountain')" class="filter-btn px-4 py-2 rounded-full bg-gray-200 hover:bg-gray-300">å±±é–“éƒ¨</button>
                    <button onclick="filterCities('urban')" class="filter-btn px-4 py-2 rounded-full bg-gray-200 hover:bg-gray-300">å¸‚è¡—åœ°</button>
                    <button onclick="filterCities('childcare')" class="filter-btn px-4 py-2 rounded-full bg-gray-200 hover:bg-gray-300">å­è‚²ã¦</button>
                </div>
                
                <div id="citiesGrid" class="grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"></div>
            </div>
        </div>
        
        <!-- City Detail Page -->
        <div id="cityDetailPage" class="page hidden">
            <div id="cityDetailContent"></div>
        </div>
        
        <!-- About Page -->
        <div id="aboutPage" class="page hidden">
            <div class="max-w-4xl mx-auto px-4 py-12">
                <h1 class="text-3xl font-bold text-center text-blue-900 mb-8">ğŸŒ¾ æ–°æ½ŸçœŒã«ã¤ã„ã¦</h1>
                
                <div class="bg-white rounded-2xl shadow-xl overflow-hidden mb-8">
                    <div class="h-64 gradient-niigata flex items-center justify-center">
                        <span class="text-8xl">ğŸ—¾</span>
                    </div>
                    <div class="p-8">
                        <h2 class="text-2xl font-bold text-blue-900 mb-4">æ—¥æœ¬æµ·ã«é¢ã—ãŸè±Šã‹ãªçœŒ</h2>
                        <p class="text-gray-700 leading-relaxed mb-6">
                            æ–°æ½ŸçœŒã¯æœ¬å·ã®æ—¥æœ¬æµ·å´ã«ä½ç½®ã—ã€æ—¥æœ¬ä¸€ã®ç±³ã©ã“ã‚ã¨ã—ã¦çŸ¥ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚
                            çœŒå†…ã«ã¯ä¿¡æ¿ƒå·ã‚’ã¯ã˜ã‚ã¨ã™ã‚‹è±Šã‹ãªæ°´ç³»ãŒæµã‚Œã€è‚¥æ²ƒãªè¶Šå¾Œå¹³é‡ãŒåºƒãŒã‚Šã¾ã™ã€‚
                            å†¬ã¯è±ªé›ªåœ°å¸¯ã¨ã—ã¦çŸ¥ã‚‰ã‚Œã¾ã™ãŒã€ãã®é›ªè§£ã‘æ°´ãŒç¾å‘³ã—ã„ãŠç±³ã¨æ—¥æœ¬é…’ã‚’è‚²ã¿ã¾ã™ã€‚
                        </p>
                        
                        <div class="grid md:grid-cols-2 gap-6">
                            <div class="bg-blue-50 rounded-xl p-6">
                                <h3 class="font-bold text-blue-900 mb-3">ğŸ“Š åŸºæœ¬ãƒ‡ãƒ¼ã‚¿</h3>
                                <ul class="space-y-2 text-gray-700">
                                    <li>ğŸ‘¥ äººå£ï¼šç´„215ä¸‡äºº</li>
                                    <li>ğŸ“ é¢ç©ï¼š12,584 kmÂ²</li>
                                    <li>ğŸ›ï¸ çœŒåºæ‰€åœ¨åœ°ï¼šæ–°æ½Ÿå¸‚</li>
                                    <li>ğŸŒ¡ï¸ æ°—å€™ï¼šæ—¥æœ¬æµ·å´æ°—å€™</li>
                                </ul>
                            </div>
                            <div class="bg-amber-50 rounded-xl p-6">
                                <h3 class="font-bold text-amber-900 mb-3">âœ¨ ç‰¹ç”£å“</h3>
                                <ul class="space-y-2 text-gray-700">
                                    <li>ğŸš ã‚³ã‚·ãƒ’ã‚«ãƒª</li>
                                    <li>ğŸ¶ æ—¥æœ¬é…’ï¼ˆ90ä»¥ä¸Šã®é…’è”µï¼‰</li>
                                    <li>ğŸœ ã¸ããã°</li>
                                    <li>ğŸ¦€ ç´…ã‚ºãƒ¯ã‚¤ã‚¬ãƒ‹</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white rounded-2xl shadow-xl p-8">
                    <h2 class="text-2xl font-bold text-blue-900 mb-6">ğŸ  ç§»ä½æ”¯æ´åˆ¶åº¦</h2>
                    <div class="space-y-4">
                        <div class="border-l-4 border-blue-500 pl-4">
                            <h3 class="font-bold text-gray-800">ç§»ä½æ”¯æ´é‡‘</h3>
                            <p class="text-gray-600">æ±äº¬23åŒºã‹ã‚‰ç§»ä½ã®å ´åˆã€æœ€å¤§100ä¸‡å††ï¼ˆä¸–å¸¯ã®å ´åˆï¼‰ã®æ”¯æ´é‡‘</p>
                        </div>
                        <div class="border-l-4 border-green-500 pl-4">
                            <h3 class="font-bold text-gray-800">ä½å®…æ”¯æ´</h3>
                            <p class="text-gray-600">ç©ºãå®¶ãƒãƒ³ã‚¯åˆ¶åº¦ã€ä½å®…å–å¾—è£œåŠ©é‡‘ãªã©å¸‚ç”ºæ‘ã”ã¨ã®æ”¯æ´</p>
                        </div>
                        <div class="border-l-4 border-amber-500 pl-4">
                            <h3 class="font-bold text-gray-800">å°±æ¥­æ”¯æ´</h3>
                            <p class="text-gray-600">UIã‚¿ãƒ¼ãƒ³è€…å‘ã‘å°±è·ãƒãƒƒãƒãƒ³ã‚°ã€èµ·æ¥­æ”¯æ´åˆ¶åº¦</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Game Overlay -->
    <div id="gameOverlay" class="fixed inset-0 bg-black/80 z-50 hidden flex items-center justify-center">
        <div class="bg-white rounded-2xl max-w-lg w-full mx-4 overflow-hidden shadow-2xl">
            <div class="gradient-niigata text-white p-4 flex justify-between items-center">
                <h2 class="text-xl font-bold">ğŸš£ ä¿¡æ¿ƒå·ä¸‹ã‚Š</h2>
                <button onclick="closeGame()" class="text-2xl hover:text-amber-300">&times;</button>
            </div>
            
            <div id="gameStart" class="p-8 text-center">
                <div class="text-6xl mb-4">ğŸ›¶</div>
                <h3 class="text-2xl font-bold text-blue-900 mb-4">ä¿¡æ¿ƒå·ä¸‹ã‚Šã‚²ãƒ¼ãƒ </h3>
                <p class="text-gray-600 mb-6">
                    èˆŸã‚’æ“ä½œã—ã¦å²©ã‚’é¿ã‘ãªãŒã‚‰ã€å®ç®±ã‚’é›†ã‚ã‚ˆã†ï¼<br>
                    å®ç®±ã‚’å–ã‚‹ã¨æ–°æ½Ÿã®å¸‚ç”ºæ‘ãŒç´¹ä»‹ã•ã‚Œã‚‹ã‚ˆï¼
                </p>
                <p class="text-sm text-gray-500 mb-4">
                    æ“ä½œï¼šâ† â†’ ã‚­ãƒ¼ ã¾ãŸã¯ ç”»é¢å·¦å³ã‚¿ãƒƒãƒ—
                </p>
                <button onclick="beginGame()" class="bg-amber-500 hover:bg-amber-600 text-white px-8 py-3 rounded-full font-bold text-lg transition">
                    ã‚¹ã‚¿ãƒ¼ãƒˆï¼
                </button>
            </div>
            
            <div id="gamePlay" class="hidden">
                <div class="p-2 bg-gray-100 flex justify-between items-center">
                    <span class="font-bold text-blue-900">ã‚¹ã‚³ã‚¢: <span id="gameScore">0</span></span>
                    <span class="text-gray-600">ğŸ <span id="treasureCount">0</span></span>
                </div>
                <canvas id="gameCanvas" width="400" height="500" class="w-full cursor-pointer"></canvas>
            </div>
            
            <div id="gameOver" class="hidden p-8 text-center">
                <h3 class="text-2xl font-bold text-blue-900 mb-2">ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ï¼</h3>
                <p class="text-4xl font-bold text-amber-500 mb-4" id="finalScore">0ç‚¹</p>
                <p class="text-gray-600 mb-6">ç™ºè¦‹ã—ãŸå¸‚ç”ºæ‘: <span id="discoveredCities">0</span>ä»¶</p>
                <div class="flex gap-4 justify-center">
                    <button onclick="beginGame()" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-full transition">
                        ã‚‚ã†ä¸€åº¦
                    </button>
                    <button onclick="closeGame()" class="bg-gray-200 hover:bg-gray-300 px-6 py-2 rounded-full transition">
                        é–‰ã˜ã‚‹
                    </button>
                </div>
                <div id="discoveredList" class="mt-6 text-left max-h-40 overflow-y-auto"></div>
            </div>
        </div>
    </div>
    
    <!-- City Popup (for game) -->
    <div id="cityPopup" class="fixed inset-0 bg-black/70 z-[60] hidden flex items-center justify-center">
        <div class="bg-white rounded-2xl max-w-sm w-full mx-4 overflow-hidden shadow-2xl fade-in">
            <div class="h-40 bg-gradient-to-br from-blue-400 to-cyan-300 flex items-center justify-center">
                <span id="popupEmoji" class="text-7xl"></span>
            </div>
            <div class="p-6 text-center">
                <h3 id="popupCityName" class="text-2xl font-bold text-blue-900 mb-2"></h3>
                <p id="popupCityDesc" class="text-gray-600 mb-4"></p>
                <button onclick="closeCityPopup()" class="bg-amber-500 hover:bg-amber-600 text-white px-6 py-2 rounded-full transition">
                    ç¶šã‘ã‚‹
                </button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-12 mt-16">
        <div class="max-w-7xl mx-auto px-4">
            <div class="grid md:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-xl font-bold mb-4">ğŸŒ¾ NIIGATA LIFE</h3>
                    <p class="text-gray-400">æ–°æ½ŸçœŒã¸ã®ç§»ä½ã‚’å¿œæ´ã™ã‚‹æƒ…å ±ã‚µã‚¤ãƒˆã§ã™ã€‚</p>
                </div>
                <div>
                    <h4 class="font-bold mb-4">ã‚³ãƒ³ãƒ†ãƒ³ãƒ„</h4>
                    <ul class="space-y-2 text-gray-400">
                        <li><a href="#" onclick="showPage('matching')" class="hover:text-white">ãƒãƒƒãƒãƒ³ã‚°è¨ºæ–­</a></li>
                        <li><a href="#" onclick="showPage('cities')" class="hover:text-white">å¸‚ç”ºæ‘ä¸€è¦§</a></li>
                        <li><a href="#" onclick="showPage('about')" class="hover:text-white">æ–°æ½Ÿã«ã¤ã„ã¦</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold mb-4">ãŠå½¹ç«‹ã¡ãƒªãƒ³ã‚¯</h4>
                    <ul class="space-y-2 text-gray-400">
                        <li>æ–°æ½ŸçœŒå…¬å¼HP</li>
                        <li>ç§»ä½æ”¯æ´ã‚»ãƒ³ã‚¿ãƒ¼</li>
                        <li>ãƒãƒ­ãƒ¼ãƒ¯ãƒ¼ã‚¯æ–°æ½Ÿ</li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold mb-4">ãŠå•ã„åˆã‚ã›</h4>
                    <p class="text-gray-400">info@niigata-life.example.com</p>
                </div>
            </div>
            <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-500">
                <p>Â© 2024 NIIGATA LIFE. ã“ã®ã‚µã‚¤ãƒˆã¯ãƒ‡ãƒ¢ç”¨ã§ã™ã€‚</p>
            </div>
        </div>
    </footer>

    <script>
        // ========== City Data ==========
        const cities = [
            {
                id: 1,
                name: "æ–°æ½Ÿå¸‚",
                catchphrase: "æ”¿ä»¤æŒ‡å®šéƒ½å¸‚ã®åˆ©ä¾¿æ€§ã¨è‡ªç„¶ãŒå…±å­˜",
                description: "æ–°æ½ŸçœŒã®çœŒåºæ‰€åœ¨åœ°ã€‚æ—¥æœ¬æµ·å´æœ€å¤§ã®éƒ½å¸‚ã¨ã—ã¦ã€éƒ½å¸‚æ©Ÿèƒ½ã¨è±Šã‹ãªè‡ªç„¶ãŒèª¿å’Œã—ã¦ã„ã¾ã™ã€‚ä¿¡æ¿ƒå·ãŒæµã‚Œã‚‹ç¾ã—ã„è¡—ä¸¦ã¿ã¨ã€æ´»æ°—ã‚ã‚‹å•†æ¥­ã‚¨ãƒªã‚¢ãŒé­…åŠ›ã§ã™ã€‚",
                rent: "5.5ä¸‡å††",
                population: "ç´„78ä¸‡äºº",
                tags: ["urban", "sea", "childcare"],
                emoji: "ğŸ™ï¸",
                access: "æ±äº¬ã‹ã‚‰ä¸Šè¶Šæ–°å¹¹ç·šã§ç´„2æ™‚é–“",
                climate: "æ—¥æœ¬æµ·å´æ°—å€™ã€å†¬ã¯é›ªãŒå¤šã„",
                features: ["æ–°å¹¹ç·šåœè»Šé§…", "ç©ºæ¸¯ã‚ã‚Š", "å•†æ¥­æ–½è¨­å……å®Ÿ", "åŒ»ç™‚æ©Ÿé–¢å¤šæ•°"],
                support: ["ç§»ä½æ”¯æ´é‡‘æœ€å¤§100ä¸‡å††", "å­è‚²ã¦ä¸–å¸¯å‘ã‘ä½å®…è£œåŠ©", "å‰µæ¥­æ”¯æ´åˆ¶åº¦"],
                gallery: ["ğŸŒ†", "ğŸŒ‰", "ğŸ­"]
            },
            {
                id: 2,
                name: "é•·å²¡å¸‚",
                catchphrase: "èŠ±ç«ã¨æ­´å²ã®åŸä¸‹ç”º",
                description: "æ—¥æœ¬ä¸‰å¤§èŠ±ç«ã®ä¸€ã¤ã€Œé•·å²¡ã¾ã¤ã‚Šå¤§èŠ±ç«å¤§ä¼šã€ã§æœ‰åã€‚å·¥æ¥­éƒ½å¸‚ã¨ã—ã¦ã®ç™ºå±•ã¨ã€æ­´å²ã‚ã‚‹åŸä¸‹ç”ºã®é¢¨æƒ…ã‚’ä½µã›æŒã¤é­…åŠ›çš„ãªéƒ½å¸‚ã§ã™ã€‚",
                rent: "4.8ä¸‡å††",
                population: "ç´„26ä¸‡äºº",
                tags: ["urban", "mountain", "childcare"],
                emoji: "ğŸ†",
                access: "æ±äº¬ã‹ã‚‰ä¸Šè¶Šæ–°å¹¹ç·šã§ç´„1æ™‚é–“40åˆ†",
                climate: "è±ªé›ªåœ°å¸¯ã€å¤ã¯æ¯”è¼ƒçš„æ¶¼ã—ã„",
                features: ["æ–°å¹¹ç·šåœè»Šé§…", "é•·å²¡æŠ€è¡“ç§‘å­¦å¤§å­¦", "ã‚¢ã‚ªãƒ¼ãƒ¬é•·å²¡"],
                support: ["ç§»ä½æ”¯æ´é‡‘", "ç©ºãå®¶æ”¹ä¿®è£œåŠ©", "èµ·æ¥­æ”¯æ´"],
                gallery: ["ğŸ†", "ğŸ¯", "ğŸ“"]
            },
            {
                id: 3,
                name: "ä¸Šè¶Šå¸‚",
                catchphrase: "ä¸Šæ‰è¬™ä¿¡å…¬ã‚†ã‹ã‚Šã®æ­´å²éƒ½å¸‚",
                description: "æˆ¦å›½æ­¦å°†ãƒ»ä¸Šæ‰è¬™ä¿¡å…¬ã®å±…åŸã€Œæ˜¥æ—¥å±±åŸã€ãŒã‚ã‚‹æ­´å²ã®è¡—ã€‚æ—¥æœ¬æµ·ã«é¢ã—ã€ã‚¹ã‚­ãƒ¼ãƒªã‚¾ãƒ¼ãƒˆã‚‚è¿‘ã„ã€è‡ªç„¶ã¨æ­´å²ãŒèåˆã—ãŸéƒ½å¸‚ã§ã™ã€‚",
                rent: "4.5ä¸‡å††",
                population: "ç´„18ä¸‡äºº",
                tags: ["urban", "sea", "mountain"],
                emoji: "âš”ï¸",
                access: "æ±äº¬ã‹ã‚‰åŒ—é™¸æ–°å¹¹ç·šã§ç´„2æ™‚é–“",
                climate: "è±ªé›ªåœ°å¸¯ã€æµ·æ´‹æ€§æ°—å€™ã®å½±éŸ¿ã‚‚",
                features: ["åŒ—é™¸æ–°å¹¹ç·šåœè»Š", "æ˜¥æ—¥å±±åŸè·¡", "ç›´æ±Ÿæ´¥æ¸¯"],
                support: ["UIã‚¿ãƒ¼ãƒ³æ”¯æ´é‡‘", "è¾²æ¥­ç ”ä¿®åˆ¶åº¦", "ä½å®…å–å¾—æ”¯æ´"],
                gallery: ["ğŸ¯", "â›·ï¸", "ğŸŒŠ"]
            },
            {
                id: 4,
                name: "æŸå´å¸‚",
                catchphrase: "æ—¥æœ¬æµ·ã®å¤•æ—¥ã¨æµ·æ°´æµ´ã®è¡—",
                description: "ç¾ã—ã„æµ·å²¸ç·šã¨è±Šã‹ãªè‡ªç„¶ã«æµã¾ã‚ŒãŸè¡—ã€‚å¤ã¯æµ·æ°´æµ´å®¢ã§è³‘ã‚ã„ã€å†¬ã¯æ—¥æœ¬æµ·ã®è’æ³¢ãŒè¿«åŠ›æº€ç‚¹ã€‚ããŠã‚“æŸå´ã¾ã¤ã‚Šã®èŠ±ç«ã‚‚æœ‰åã§ã™ã€‚",
                rent: "4.2ä¸‡å††",
                population: "ç´„8ä¸‡äºº",
                tags: ["sea", "childcare"],
                emoji: "ğŸ–ï¸",
                access: "æ±äº¬ã‹ã‚‰ä¸Šè¶Šæ–°å¹¹ç·šï¼‹åœ¨æ¥ç·šã§ç´„3æ™‚é–“",
                climate: "æ—¥æœ¬æµ·å´æ°—å€™ã€å¤ã¯æµ·é¢¨ãŒå¿ƒåœ°ã‚ˆã„",
                features: ["æµ·æ°´æµ´å ´å¤šæ•°", "æŸå´åˆˆç¾½åŸå­åŠ›ç™ºé›»æ‰€", "ãˆã‚“ã¾å¸‚"],
                support: ["ç§»ä½ä½“é¨“ä½å®…", "å­è‚²ã¦æ”¯æ´å……å®Ÿ", "ç©ºãå®¶ãƒãƒ³ã‚¯"],
                gallery: ["ğŸŒ…", "ğŸ–ï¸", "ğŸ†"]
            },
            {
                id: 5,
                name: "ä½æ¸¡å¸‚",
                catchphrase: "ãƒˆã‚­èˆã†é»„é‡‘ã®å³¶",
                description: "æ—¥æœ¬æµ·æœ€å¤§ã®å³¶ãƒ»ä½æ¸¡å³¶å…¨åŸŸã‚’å ã‚ã‚‹å¸‚ã€‚ä¸–ç•Œéºç”£å€™è£œã®é‡‘å±±ã€ãƒˆã‚­ã®é‡ç”Ÿå¾©å¸°ã€ä¼çµ±èŠ¸èƒ½ãªã©ã€ç‹¬è‡ªã®æ–‡åŒ–ã¨è‡ªç„¶ãŒæ¯ã¥ãç‰¹åˆ¥ãªå ´æ‰€ã§ã™ã€‚",
                rent: "3.8ä¸‡å††",
                population: "ç´„5ä¸‡äºº",
                tags: ["sea", "mountain", "nature"],
                emoji: "ğŸ¦…",
                access: "æ–°æ½Ÿæ¸¯ã‹ã‚‰ã‚¸ã‚§ãƒƒãƒˆãƒ•ã‚©ã‚¤ãƒ«ã§ç´„1æ™‚é–“",
                climate: "æµ·æ´‹æ€§æ°—å€™ã€æœ¬åœŸã‚ˆã‚Šæ¸©æš–",
                features: ["ä¸–ç•Œéºç”£å€™è£œãƒ»ä½æ¸¡é‡‘å±±", "ãƒˆã‚­ã®æ£®å…¬åœ’", "èƒ½ãƒ»é¬¼å¤ªé¼“"],
                support: ["å³¶æš®ã‚‰ã—ä½“é¨“", "ç§»ä½æ”¯æ´é‡‘", "å°±è¾²æ”¯æ´å……å®Ÿ"],
                gallery: ["ğŸ¦…", "â›ï¸", "ğŸ¥"]
            },
            {
                id: 6,
                name: "å¦™é«˜å¸‚",
                catchphrase: "å¦™é«˜å±±éº“ã®ãƒªã‚¾ãƒ¼ãƒˆã‚¿ã‚¦ãƒ³",
                description: "å¦™é«˜å±±ã®éº“ã«åºƒãŒã‚‹ãƒªã‚¾ãƒ¼ãƒˆåœ°ã€‚å†¬ã¯ã‚¹ã‚­ãƒ¼ã€å¤ã¯ç™»å±±ã‚„ãƒˆãƒ¬ãƒƒã‚­ãƒ³ã‚°ãŒæ¥½ã—ã‚ã¾ã™ã€‚æ¸©æ³‰ã‚‚è±Šå¯Œã§ã€å››å­£ã‚’é€šã˜ã¦ã‚¢ã‚¦ãƒˆãƒ‰ã‚¢ã‚’æº€å–«ã§ãã¾ã™ã€‚",
                rent: "4.0ä¸‡å††",
                population: "ç´„3ä¸‡äºº",
                tags: ["mountain", "nature", "outdoor"],
                emoji: "â›·ï¸",
                access: "æ±äº¬ã‹ã‚‰åŒ—é™¸æ–°å¹¹ç·šã§ç´„2æ™‚é–“",
                climate: "è±ªé›ªåœ°å¸¯ã€å¤ã¯é¿æš‘åœ°ã¨ã—ã¦å¿«é©",
                features: ["å¦™é«˜é«˜åŸã‚¹ã‚­ãƒ¼å ´", "èµ¤å€‰æ¸©æ³‰", "è‹—åæ»"],
                support: ["ç§»ä½å®šä½ä¿ƒé€²è£œåŠ©é‡‘", "ã‚¹ã‚­ãƒ¼ã‚·ãƒ¼ã‚ºãƒ³é›‡ç”¨", "å­è‚²ã¦æ”¯æ´"],
                gallery: ["â›·ï¸", "â™¨ï¸", "ğŸ”ï¸"]
            },
            {
                id: 7,
                name: "ç³¸é­šå·å¸‚",
                catchphrase: "ãƒ’ã‚¹ã‚¤ã¨å¤§åœ°ã®ç¥ç§˜",
                description: "æ—¥æœ¬åˆã®ãƒ¦ãƒã‚¹ã‚³ä¸–ç•Œã‚¸ã‚ªãƒ‘ãƒ¼ã‚¯èªå®šåœ°ã€‚ãƒ’ã‚¹ã‚¤ã®ç”£åœ°ã¨ã—ã¦çŸ¥ã‚‰ã‚Œã€ãƒ•ã‚©ãƒƒã‚µãƒã‚°ãƒŠãªã©åœ°è³ªå­¦çš„ã«è²´é‡ãªè‡ªç„¶ãŒåºƒãŒã‚Šã¾ã™ã€‚",
                rent: "4.0ä¸‡å††",
                population: "ç´„4ä¸‡äºº",
                tags: ["sea", "mountain", "nature"],
                emoji: "ğŸ’",
                access: "æ±äº¬ã‹ã‚‰åŒ—é™¸æ–°å¹¹ç·šã§ç´„2æ™‚é–“15åˆ†",
                climate: "æ—¥æœ¬æµ·å´æ°—å€™ã€å±±é–“éƒ¨ã¯è±ªé›ª",
                features: ["ãƒ•ã‚©ãƒƒã‚µãƒã‚°ãƒŠãƒŸãƒ¥ãƒ¼ã‚¸ã‚¢ãƒ ", "ãƒ’ã‚¹ã‚¤æµ·å²¸", "è¦ªä¸çŸ¥"],
                support: ["ç§»ä½æ”¯æ´é‡‘", "ç©ºãå®¶ãƒªãƒãƒ™è£œåŠ©", "æ¼æ¥­ç ”ä¿®"],
                gallery: ["ğŸ’", "ğŸŒŠ", "ğŸ”ï¸"]
            },
            {
                id: 8,
                name: "åæ—¥ç”ºå¸‚",
                catchphrase: "å¤§åœ°ã®èŠ¸è¡“ç¥­ã®é‡Œ",
                description: "ä¸–ç•Œæœ€å¤§è¦æ¨¡ã®å›½éš›èŠ¸è¡“ç¥­ã€Œå¤§åœ°ã®èŠ¸è¡“ç¥­ã€ã®èˆå°ã€‚æ£šç”°ã‚„é‡Œå±±ã®ç¾ã—ã„æ™¯è¦³ã¨ã€ç¾ä»£ã‚¢ãƒ¼ãƒˆãŒèåˆã™ã‚‹ç‹¬ç‰¹ã®æ–‡åŒ–åœã‚’å½¢æˆã—ã¦ã„ã¾ã™ã€‚",
                rent: "4.2ä¸‡å††",
                population: "ç´„5ä¸‡äºº",
                tags: ["mountain", "nature", "culture"],
                emoji: "ğŸ¨",
                access: "æ±äº¬ã‹ã‚‰ä¸Šè¶Šæ–°å¹¹ç·šï¼‹ã»ãã»ãç·šã§ç´„2æ™‚é–“",
                climate: "æ—¥æœ¬æœ‰æ•°ã®è±ªé›ªåœ°å¸¯",
                features: ["å¤§åœ°ã®èŠ¸è¡“ç¥­", "æ˜Ÿå³ ã®æ£šç”°", "åæ—¥ç”ºé›ªã¾ã¤ã‚Š"],
                support: ["èŠ¸è¡“ç¥­é–¢é€£é›‡ç”¨", "è¾²æ¥­æ”¯æ´", "é›ªå›½æš®ã‚‰ã—ä½“é¨“"],
                gallery: ["ğŸ¨", "ğŸŒ¾", "â„ï¸"]
            },
            {
                id: 9,
                name: "å—é­šæ²¼å¸‚",
                catchphrase: "ã‚³ã‚·ãƒ’ã‚«ãƒªç™ºç¥¥ã®åœ°",
                description: "æ—¥æœ¬ä¸€ã®ãƒ–ãƒ©ãƒ³ãƒ‰ç±³ã€Œé­šæ²¼ç”£ã‚³ã‚·ãƒ’ã‚«ãƒªã€ã®ä¸­å¿ƒç”£åœ°ã€‚è±Šã‹ãªé›ªè§£ã‘æ°´ãŒè‚²ã‚€æœ€é«˜å“è³ªã®ãŠç±³ã¨ã€ã‚¹ã‚­ãƒ¼ãƒªã‚¾ãƒ¼ãƒˆãŒé­…åŠ›ã§ã™ã€‚",
                rent: "4.3ä¸‡å††",
                population: "ç´„5.5ä¸‡äºº",
                tags: ["mountain", "nature", "outdoor", "gourmet"],
                emoji: "ğŸš",
                access: "æ±äº¬ã‹ã‚‰ä¸Šè¶Šæ–°å¹¹ç·šã§ç´„1æ™‚é–“20åˆ†",
                climate: "æ—¥æœ¬æœ‰æ•°ã®è±ªé›ªåœ°å¸¯",
                features: ["é­šæ²¼ç”£ã‚³ã‚·ãƒ’ã‚«ãƒª", "GALAæ¹¯æ²¢ã‚¹ã‚­ãƒ¼å ´", "é›²æ´åºµ"],
                support: ["è¾²æ¥­ç ”ä¿®åˆ¶åº¦", "ç§»ä½æ”¯æ´é‡‘", "ä½å®…è£œåŠ©"],
                gallery: ["ğŸš", "â›·ï¸", "ğŸ”ï¸"]
            },
            {
                id: 10,
                name: "ç‡•å¸‚",
                catchphrase: "ã‚‚ã®ã¥ãã‚Šã®è¡—",
                description: "é‡‘å±åŠ å·¥ãƒ»æ´‹é£Ÿå™¨è£½é€ ã§ä¸–ç•Œçš„ã«çŸ¥ã‚‰ã‚Œã‚‹ç”£æ¥­éƒ½å¸‚ã€‚è·äººæŠ€è¡“ãŒæ¯ã¥ãè¡—ã§ã€è‡ªåˆ†ã‚‚ã€Œã‚‚ã®ã¥ãã‚Šã€ã«æºã‚ã‚‹æš®ã‚‰ã—ãŒã§ãã¾ã™ã€‚",
                rent: "4.5ä¸‡å††",
                population: "ç´„7.7ä¸‡äºº",
                tags: ["urban", "culture"],
                emoji: "ğŸ”§",
                access: "æ±äº¬ã‹ã‚‰ä¸Šè¶Šæ–°å¹¹ç·šã§ç´„2æ™‚é–“ï¼ˆç‡•ä¸‰æ¡é§…ï¼‰",
                climate: "æ—¥æœ¬æµ·å´æ°—å€™",
                features: ["ç‡•ä¸‰æ¡ã‚‚ã®ã¥ãã‚Šã®ç”º", "è·äººä½“é¨“", "é“ã®é§… ç‡•ä¸‰æ¡"],
                support: ["å‰µæ¥­æ”¯æ´", "æŠ€è¡“ç¿’å¾—æ”¯æ´", "ç§»ä½æ”¯æ´é‡‘"],
                gallery: ["ğŸ”§", "ğŸ´", "ğŸ­"]
            },
            {
                id: 11,
                name: "ä¸‰æ¡å¸‚",
                catchphrase: "åˆƒç‰©ã¨é‡‘å±åŠ å·¥ã®ã¾ã¡",
                description: "å¤ãã‹ã‚‰åˆƒç‰©ã‚„é‡‘å±åŠ å·¥ã§æ „ãˆãŸè·äººã®è¡—ã€‚ç‡•å¸‚ã¨åˆã‚ã›ã¦ã€Œç‡•ä¸‰æ¡ã€ã¨ã—ã¦å…¨å›½ã«çŸ¥ã‚‰ã‚Œã€ã‚‚ã®ã¥ãã‚Šæ–‡åŒ–ãŒæ ¹ä»˜ã„ã¦ã„ã¾ã™ã€‚",
                rent: "4.3ä¸‡å††",
                population: "ç´„9.5ä¸‡äºº",
                tags: ["urban", "culture", "childcare"],
                emoji: "ğŸ”¨",
                access: "æ±äº¬ã‹ã‚‰ä¸Šè¶Šæ–°å¹¹ç·šã§ç´„2æ™‚é–“ï¼ˆç‡•ä¸‰æ¡é§…ï¼‰",
                climate: "æ—¥æœ¬æµ·å´æ°—å€™",
                features: ["ä¸‰æ¡é›å†¶é“å ´", "ã‚¹ãƒãƒ¼ãƒ”ãƒ¼ã‚¯æœ¬ç¤¾", "å…«æœ¨ãƒ¶é¼»"],
                support: ["ã‚‚ã®ã¥ãã‚Šå‰µæ¥­æ”¯æ´", "å­è‚²ã¦æ”¯æ´å……å®Ÿ", "ç§»ä½æ”¯æ´é‡‘"],
                gallery: ["ğŸ”¨", "â›º", "ğŸï¸"]
            },
            {
                id: 12,
                name: "æ‘ä¸Šå¸‚",
                catchphrase: "é®­ã¨åŸä¸‹ç”ºæ–‡åŒ–ã®ç¶™æ‰¿åœ°",
                description: "é®­æ–‡åŒ–ã¨åŸä¸‹ç”ºã®é¢¨æƒ…ãŒæ®‹ã‚‹åŒ—é™ã®èŒ¶å‡¦ã€‚ä¼çµ±çš„ãªç”ºå±‹ãŒç«‹ã¡ä¸¦ã¶è¡—ä¸¦ã¿ã¨ã€æ—¥æœ¬æµ·ã®çµ¶æ™¯ãŒæ¥½ã—ã‚ã‚‹ç€¬æ³¢æ¸©æ³‰ãŒé­…åŠ›ã§ã™ã€‚",
                rent: "3.9ä¸‡å††",
                population: "ç´„5.8ä¸‡äºº",
                tags: ["sea", "culture", "gourmet"],
                emoji: "ğŸŸ",
                access: "æ±äº¬ã‹ã‚‰ä¸Šè¶Šæ–°å¹¹ç·šï¼‹åœ¨æ¥ç·šã§ç´„3æ™‚é–“",
                climate: "æ—¥æœ¬æµ·å´æ°—å€™ã€æ¯”è¼ƒçš„æ¸©æš–",
                features: ["å¡©å¼•ãé®­", "ç€¬æ³¢æ¸©æ³‰", "åŸä¸‹ç”ºã®ç”ºå±‹"],
                support: ["ç§»ä½æ”¯æ´é‡‘", "ç©ºãå®¶ãƒãƒ³ã‚¯", "æ¼æ¥­ä½“é¨“"],
                gallery: ["ğŸŸ", "â™¨ï¸", "ğŸ¯"]
            }
        ];

        // ========== Quiz Questions ==========
        const questions = [
            {
                question: "ã©ã‚“ãªç’°å¢ƒã§æš®ã‚‰ã—ãŸã„ã§ã™ã‹ï¼Ÿ",
                options: [
                    { text: "ğŸŒŠ æµ·æ²¿ã„ã§æ½®é¢¨ã‚’æ„Ÿã˜ãŸã„", value: "sea" },
                    { text: "ğŸ”ï¸ å±±ã«å›²ã¾ã‚ŒãŸè‡ªç„¶è±Šã‹ãªå ´æ‰€", value: "mountain" },
                    { text: "ğŸ™ï¸ ä¾¿åˆ©ãªå¸‚è¡—åœ°ãŒã„ã„", value: "urban" },
                    { text: "ğŸŒ¾ ã©ã“ã§ã‚‚å¤§ä¸ˆå¤«", value: "any" }
                ]
            },
            {
                question: "æœ€ã‚‚é‡è¦–ã™ã‚‹æ¡ä»¶ã¯ï¼Ÿ",
                options: [
                    { text: "ğŸ’° å®¶è³ƒã®å®‰ã•", value: "rent" },
                    { text: "ğŸšƒ äº¤é€šã®ä¾¿åˆ©ã•", value: "access" },
                    { text: "ğŸŒ³ è‡ªç„¶ç’°å¢ƒ", value: "nature" },
                    { text: "ğŸ‘¶ å­è‚²ã¦ç’°å¢ƒ", value: "childcare" }
                ]
            },
            {
                question: "ä¼‘æ—¥ã¯ä½•ã‚’ã—ã¦éã”ã—ãŸã„ï¼Ÿ",
                options: [
                    { text: "â›·ï¸ ã‚¹ã‚­ãƒ¼ã‚„ç™»å±±ãªã©ã‚¢ã‚¦ãƒˆãƒ‰ã‚¢", value: "outdoor" },
                    { text: "ğŸ¨ ç¾è¡“é¤¨ã‚„æ–‡åŒ–æ–½è¨­ã‚ãã‚Š", value: "culture" },
                    { text: "ğŸœ åœ°å…ƒã‚°ãƒ«ãƒ¡ã®é£Ÿã¹æ­©ã", value: "gourmet" },
                    { text: "ğŸ  ã®ã‚“ã³ã‚Šå®¶ã§éã”ã™", value: "relax" }
                ]
            },
            {
                question: "å¸Œæœ›ã™ã‚‹å®¶è³ƒå¸¯ã¯ï¼Ÿ",
                options: [
                    { text: "ã€œ4ä¸‡å††", value: "rent1" },
                    { text: "4ã€œ5ä¸‡å††", value: "rent2" },
                    { text: "5ã€œ7ä¸‡å††", value: "rent3" },
                    { text: "7ä¸‡å††ã€œ", value: "rent4" }
                ]
            },
            {
                question: "é›ªã«å¯¾ã™ã‚‹è€ƒãˆã¯ï¼Ÿ",
                options: [
                    { text: "â„ï¸ é›ªå›½æš®ã‚‰ã—ã‚’æ¥½ã—ã¿ãŸã„ï¼", value: "snow_love" },
                    { text: "â›„ ç¨‹ã€…ã®é›ªãªã‚‰å¤§ä¸ˆå¤«", value: "snow_ok" },
                    { text: "â˜€ï¸ ã§ãã‚Œã°é›ªã¯å°‘ãªã„æ–¹ãŒã„ã„", value: "snow_less" }
                ]
            },
            {
                question: "æ±äº¬ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã¯é‡è¦ï¼Ÿ",
                options: [
                    { text: "ğŸš„ 2æ™‚é–“ä»¥å†…ãŒã„ã„", value: "access_near" },
                    { text: "ğŸšƒ 3æ™‚é–“ä»¥å†…ãªã‚‰è¨±å®¹", value: "access_mid" },
                    { text: "ğŸï¸ é ãã¦ã‚‚æ°—ã«ã—ãªã„", value: "access_far" }
                ]
            },
            {
                question: "ã©ã‚“ãªã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãŒç†æƒ³ï¼Ÿ",
                options: [
                    { text: "ğŸ‘¥ äººã¨ã®ç¹‹ãŒã‚ŠãŒå¼·ã„åœ°åŸŸ", value: "community" },
                    { text: "ğŸ¢ ç¨‹ã‚ˆã„è·é›¢æ„Ÿã®éƒ½å¸‚éƒ¨", value: "urban_life" },
                    { text: "ğŸŒ¿ é™ã‹ã§è½ã¡ç€ã„ãŸç’°å¢ƒ", value: "quiet" }
                ]
            },
            {
                question: "æ–°æ½Ÿã¨ã„ãˆã°ï¼Ÿ",
                options: [
                    { text: "ğŸš ç¾å‘³ã—ã„ãŠç±³ã¨æ—¥æœ¬é…’ï¼", value: "gourmet" },
                    { text: "â›·ï¸ ã‚¹ã‚­ãƒ¼ãƒ»ã‚¹ãƒãƒœå¤©å›½ï¼", value: "outdoor" },
                    { text: "ğŸŒŠ æ—¥æœ¬æµ·ã®çµ¶æ™¯ï¼", value: "sea" },
                    { text: "ğŸ† èŠ±ç«å¤§ä¼šï¼", value: "culture" }
                ]
            }
        ];

        // ========== State ==========
        let currentPage = 'home';
        let currentQuestion = 0;
        let answers = [];
        let gameState = null;

        // ========== Initialize ==========
        document.addEventListener('DOMContentLoaded', () => {
            initComments();
            renderPopularCities();
            renderCitiesGrid();
            showPage('home');
        });

        // ========== Navigation ==========
        function showPage(page) {
            document.querySelectorAll('.page').forEach(p => p.classList.add('hidden'));
            document.getElementById(page + 'Page').classList.remove('hidden');
            currentPage = page;
            window.scrollTo(0, 0);
            
            if (page === 'matching') {
                resetQuiz();
            }
        }

        function toggleMobileMenu() {
            document.getElementById('mobileMenu').classList.toggle('hidden');
        }

        // ========== Home Page ==========
        function renderPopularCities() {
            const popular = cities.slice(0, 4);
            const container = document.getElementById('popularCities');
            container.innerHTML = popular.map(city => createCityCard(city)).join('');
        }

        // ========== Cities Page ==========
        function renderCitiesGrid(filter = 'all') {
            let filtered = cities;
            if (filter !== 'all') {
                filtered = cities.filter(c => c.tags.includes(filter));
            }
            document.getElementById('citiesGrid').innerHTML = filtered.map(city => createCityCard(city)).join('');
        }

        function createCityCard(city) {
            return `
                <div class="bg-white rounded-xl shadow-lg overflow-hidden card-hover cursor-pointer" onclick="showCityDetail(${city.id})">
                    <div class="h-40 gradient-niigata flex items-center justify-center">
                        <span class="text-6xl">${city.emoji}</span>
                    </div>
                    <div class="p-5">
                        <h3 class="text-xl font-bold text-blue-900 mb-1">${city.name}</h3>
                        <p class="text-sm text-gray-500 mb-3">${city.catchphrase}</p>
                        <div class="flex flex-wrap gap-1 mb-3">
                            ${city.tags.slice(0, 3).map(tag => `
                                <span class="text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded-full">${getTagLabel(tag)}</span>
                            `).join('')}
                        </div>
                        <div class="flex justify-between text-sm text-gray-600">
                            <span>ğŸ  ${city.rent}</span>
                            <span>ğŸ‘¥ ${city.population}</span>
                        </div>
                    </div>
                </div>
            `;
        }

        function getTagLabel(tag) {
            const labels = {
                sea: 'æµ·æ²¿ã„', mountain: 'å±±é–“éƒ¨', urban: 'å¸‚è¡—åœ°',
                nature: 'è‡ªç„¶è±Šã‹', childcare: 'å­è‚²ã¦', outdoor: 'ã‚¢ã‚¦ãƒˆãƒ‰ã‚¢',
                culture: 'æ–‡åŒ–', gourmet: 'ã‚°ãƒ«ãƒ¡'
            };
            return labels[tag] || tag;
        }

        function filterCities(filter) {
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('bg-blue-600', 'text-white');
                btn.classList.add('bg-gray-200');
            });
            event.target.classList.add('bg-blue-600', 'text-white');
            event.target.classList.remove('bg-gray-200');
            renderCitiesGrid(filter);
        }

        // ========== City Detail ==========
        function showCityDetail(cityId) {
            const city = cities.find(c => c.id === cityId);
            if (!city) return;

            const comments = getComments(cityId);
            
            document.getElementById('cityDetailContent').innerHTML = `
                <div class="max-w-4xl mx-auto px-4 py-12 fade-in">
                    <button onclick="showPage('cities')" class="text-blue-600 hover:text-blue-800 mb-6 inline-block">
                        â† ä¸€è¦§ã«æˆ»ã‚‹
                    </button>
                    
                    <!-- Header -->
                    <div class="bg-white rounded-2xl shadow-xl overflow-hidden mb-8">
                        <div class="h-64 gradient-niigata flex items-center justify-center relative">
                            <span class="text-9xl">${city.emoji}</span>
                        </div>
                        <div class="p-8">
                            <div class="flex flex-wrap gap-2 mb-4">
                                ${city.tags.map(tag => `
                                    <span class="px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm">${getTagLabel(tag)}</span>
                                `).join('')}
                            </div>
                            <h1 class="text-3xl font-bold text-blue-900 mb-2">${city.name}</h1>
                            <p class="text-xl text-gray-600 mb-4">${city.catchphrase}</p>
                            <p class="text-gray-700 leading-relaxed">${city.description}</p>
                        </div>
                    </div>
                    
                    <!-- Gallery -->
                    <div class="grid grid-cols-3 gap-4 mb-8">
                        ${city.gallery.map(emoji => `
                            <div class="h-32 bg-gradient-to-br from-blue-100 to-cyan-100 rounded-xl flex items-center justify-center">
                                <span class="text-5xl">${emoji}</span>
                            </div>
                        `).join('')}
                    </div>
                    
                    <!-- Info Grid -->
                    <div class="grid md:grid-cols-2 gap-6 mb-8">
                        <div class="bg-white rounded-xl shadow-lg p-6">
                            <h3 class="text-lg font-bold text-blue-900 mb-4">ğŸ“Š åŸºæœ¬æƒ…å ±</h3>
                            <ul class="space-y-3 text-gray-700">
                                <li class="flex justify-between"><span>ğŸ‘¥ äººå£</span><span class="font-medium">${city.population}</span></li>
                                <li class="flex justify-between"><span>ğŸ  å¹³å‡å®¶è³ƒ</span><span class="font-medium">${city.rent}</span></li>
                                <li class="flex justify-between"><span>ğŸšƒ ã‚¢ã‚¯ã‚»ã‚¹</span><span class="font-medium text-right text-sm">${city.access}</span></li>
                                <li class="flex justify-between"><span>ğŸŒ¡ï¸ æ°—å€™</span><span class="font-medium text-right text-sm">${city.climate}</span></li>
                            </ul>
                        </div>
                        <div class="bg-white rounded-xl shadow-lg p-6">
                            <h3 class="text-lg font-bold text-blue-900 mb-4">âœ¨ ç‰¹å¾´ãƒ»é­…åŠ›</h3>
                            <ul class="space-y-2">
                                ${city.features.map(f => `<li class="flex items-center"><span class="text-amber-500 mr-2">â˜…</span>${f}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                    
                    <!-- Support -->
                    <div class="bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-6 mb-8">
                        <h3 class="text-lg font-bold text-green-800 mb-4">ğŸ  ç§»ä½æ”¯æ´åˆ¶åº¦</h3>
                        <ul class="space-y-2 text-gray-700">
                            ${city.support.map(s => `<li class="flex items-start"><span class="text-green-500 mr-2">âœ“</span>${s}</li>`).join('')}
                        </ul>
                    </div>
                    
                    <!-- Comments -->
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <h3 class="text-lg font-bold text-blue-900 mb-4">ğŸ’¬ ç§»ä½ã—ã¦ã¿ãŸæ„Ÿæƒ³</h3>
                        
                        <!-- Comment Form -->
                        <div class="bg-gray-50 rounded-lg p-4 mb-6">
                            <input type="text" id="commentName" placeholder="ãŠåå‰ï¼ˆä»»æ„ï¼‰" class="w-full mb-3 px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none">
                            <textarea id="commentText" placeholder="æ„Ÿæƒ³ã‚’æ›¸ã„ã¦ãã ã•ã„..." class="w-full mb-3 px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none h-24 resize-none"></textarea>
                            <button onclick="postComment(${city.id})" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition">æŠ•ç¨¿ã™ã‚‹</button>
                        </div>
                        
                        <!-- Comments List -->
                        <div id="commentsList" class="space-y-4">
                            ${comments.map(c => createCommentHTML(c)).join('')}
                        </div>
                    </div>
                </div>
            `;
            
            showPage('cityDetail');
        }

        function createCommentHTML(comment) {
            const isBot = comment.name === 'ã‚¬ã‚¤ãƒ‰bot';
            return `
                <div class="border-l-4 ${isBot ? 'border-amber-400 bg-amber-50' : 'border-blue-400 bg-blue-50'} rounded-r-lg p-4">
                    <div class="flex items-center gap-2 mb-2">
                        <span class="${isBot ? 'bg-amber-500' : 'bg-blue-500'} text-white text-xs px-2 py-1 rounded-full">
                            ${isBot ? 'ğŸ¤– ' : 'ğŸ‘¤ '}${comment.name}
                        </span>
                        <span class="text-xs text-gray-500">${comment.date}</span>
                    </div>
                    <p class="text-gray-700">${comment.text}</p>
                </div>
            `;
        }

        // ========== Comments System ==========
        function initComments() {
            if (!localStorage.getItem('niigata_comments')) {
                const initialComments = {};
                cities.forEach(city => {
                    initialComments[city.id] = [{
                        name: 'ã‚¬ã‚¤ãƒ‰bot',
                        text: `ã€ä½¿ç”¨ä¾‹ã€‘ã“ã‚“ã«ã¡ã¯ï¼${city.name}ã«ç§»ä½ã—ã¦3å¹´ç›®ã§ã™ã€‚åœ°åŸŸã®æ–¹ãŒæ¸©ã‹ãã€${city.tags.includes('childcare') ? 'å­è‚²ã¦ã—ã‚„ã™ã„ç’°å¢ƒã§ã™ã€‚' : 'æš®ã‚‰ã—ã‚„ã™ã„ç’°å¢ƒã§ã™ã€‚'}å†¬ã®é›ªã‹ãã¯å¤§å¤‰ã§ã™ãŒã€å››å­£ã‚’æ„Ÿã˜ã‚‰ã‚Œã‚‹æš®ã‚‰ã—ãŒæ°—ã«å…¥ã£ã¦ã„ã¾ã™ï¼${city.tags.includes('gourmet') ? 'ãŠç±³ã‚‚æ—¥æœ¬é…’ã‚‚æœ€é«˜ã§ã™ğŸšğŸ¶' : ''}`,
                        date: '2024/01/15'
                    }];
                });
                localStorage.setItem('niigata_comments', JSON.stringify(initialComments));
            }
        }

        function getComments(cityId) {
            const comments = JSON.parse(localStorage.getItem('niigata_comments') || '{}');
            return comments[cityId] || [];
        }

        function postComment(cityId) {
            const name = document.getElementById('commentName').value.trim() || 'åŒ¿å';
            const text = document.getElementById('commentText').value.trim();
            
            if (!text) {
                alert('æ„Ÿæƒ³ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }
            
            const comments = JSON.parse(localStorage.getItem('niigata_comments') || '{}');
            if (!comments[cityId]) comments[cityId] = [];
            
            const today = new Date();
            const dateStr = `${today.getFullYear()}/${String(today.getMonth()+1).padStart(2,'0')}/${String(today.getDate()).padStart(2,'0')}`;
            
            comments[cityId].unshift({
                name: name,
                text: text,
                date: dateStr
            });
            
            localStorage.setItem('niigata_comments', JSON.stringify(comments));
            
            document.getElementById('commentName').value = '';
            document.getElementById('commentText').value = '';
            document.getElementById('commentsList').innerHTML = comments[cityId].map(c => createCommentHTML(c)).join('');
        }

        // ========== Quiz System ==========
        function resetQuiz() {
            currentQuestion = 0;
            answers = [];
            document.getElementById('quizContainer').classList.remove('hidden');
            document.getElementById('resultsArea').classList.add('hidden');
            renderQuestion();
        }

        function renderQuestion() {
            const q = questions[currentQuestion];
            const progress = ((currentQuestion) / questions.length) * 100;
            
            document.getElementById('currentQ').textContent = currentQuestion + 1;
            document.getElementById('progressPercent').textContent = Math.round(progress) + '%';
            document.getElementById('progressBar').style.width = progress + '%';
            
            document.getElementById('questionArea').innerHTML = `
                <h3 class="text-xl font-bold text-blue-900 mb-6">${q.question}</h3>
                <div class="space-y-3">
                    ${q.options.map((opt, i) => `
                        <button onclick="selectAnswer('${opt.value}')" 
                            class="w-full text-left px-6 py-4 rounded-xl border-2 border-gray-200 hover:border-blue-500 hover:bg-blue-50 transition font-medium">
                            ${opt.text}
                        </button>
                    `).join('')}
                </div>
            `;
        }

        function selectAnswer(value) {
            answers.push(value);
            
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                renderQuestion();
            } else {
                showResults();
            }
        }

        function showResults() {
            document.getElementById('quizContainer').classList.add('hidden');
            document.getElementById('resultsArea').classList.remove('hidden');
            
            const scores = calculateScores();
            const topCities = scores.slice(0, 5);
            
            document.getElementById('resultsArea').innerHTML = `
                <div class="text-center mb-8 fade-in">
                    <div class="text-6xl mb-4">ğŸ‰</div>
                    <h2 class="text-2xl font-bold text-blue-900 mb-2">è¨ºæ–­çµæœ</h2>
                    <p class="text-gray-600">ã‚ãªãŸã«ãŠã™ã™ã‚ã®ç§»ä½å…ˆã¯ã“ã¡ã‚‰ï¼</p>
                </div>
                
                <div class="space-y-6">
                    ${topCities.map((item, i) => `
                        <div class="bg-white rounded-xl shadow-lg overflow-hidden card-hover cursor-pointer fade-in" 
                            style="animation-delay: ${i * 0.1}s" onclick="showCityDetail(${item.city.id})">
                            <div class="flex">
                                <div class="w-32 h-32 gradient-niigata flex items-center justify-center flex-shrink-0">
                                    <span class="text-5xl">${item.city.emoji}</span>
                                </div>
                                <div class="p-4 flex-grow">
                                    <div class="flex items-center gap-2 mb-1">
                                        <span class="bg-amber-500 text-white text-sm px-2 py-0.5 rounded-full font-bold">${i + 1}ä½</span>
                                        <span class="text-sm text-gray-500">ãƒãƒƒãƒåº¦ ${item.score}%</span>
                                    </div>
                                    <h3 class="text-lg font-bold text-blue-900">${item.city.name}</h3>
                                    <p class="text-sm text-gray-600 mb-2">${item.city.catchphrase}</p>
                                    <div class="flex gap-2 text-xs text-gray-500">
                                        <span>ğŸ  ${item.city.rent}</span>
                                        <span>ğŸšƒ ${item.city.access.split('ã§')[0]}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>
                
                <div class="text-center mt-8">
                    <button onclick="resetQuiz()" class="text-blue-600 hover:text-blue-800 font-medium">
                        ã‚‚ã†ä¸€åº¦è¨ºæ–­ã™ã‚‹
                    </button>
                </div>
            `;
        }

        function calculateScores() {
            return cities.map(city => {
                let score = 50;
                
                answers.forEach(ans => {
                    if (city.tags.includes(ans)) score += 15;
                    if (ans === 'any') score += 5;
                    
                    // Rent matching
                    const rentNum = parseFloat(city.rent);
                    if (ans === 'rent1' && rentNum < 4) score += 20;
                    if (ans === 'rent2' && rentNum >= 4 && rentNum < 5) score += 20;
                    if (ans === 'rent3' && rentNum >= 5 && rentNum < 7) score += 20;
                    if (ans === 'rent4' && rentNum >= 7) score += 20;
                    
                    // Access matching
                    if (ans === 'access_near' && city.access.includes('1æ™‚é–“')) score += 15;
                    if (ans === 'access_mid' && !city.access.includes('ã‚¸ã‚§ãƒƒãƒˆãƒ•ã‚©ã‚¤ãƒ«')) score += 10;
                    if (ans === 'access_far') score += 5;
                    
                    // Snow preference
                    if (ans === 'snow_love' && city.climate.includes('è±ªé›ª')) score += 15;
                    if (ans === 'snow_less' && !city.climate.includes('è±ªé›ª')) score += 15;
                });
                
                return { city, score: Math.min(100, score) };
            }).sort((a, b) => b.score - a.score);
        }

        // ========== Game System ==========
        let gameLoop = null;
        let discovered = [];
        
        function startGame() {
            document.getElementById('gameOverlay').classList.remove('hidden');
            document.getElementById('gameStart').classList.remove('hidden');
            document.getElementById('gamePlay').classList.add('hidden');
            document.getElementById('gameOver').classList.add('hidden');
        }

        function closeGame() {
            document.getElementById('gameOverlay').classList.add('hidden');
            if (gameLoop) {
                cancelAnimationFrame(gameLoop);
                gameLoop = null;
            }
        }

        function beginGame() {
            document.getElementById('gameStart').classList.add('hidden');
            document.getElementById('gameOver').classList.add('hidden');
            document.getElementById('gamePlay').classList.remove('hidden');
            
            discovered = [];
            initGame();
        }

        function initGame() {
            const canvas = document.getElementById('gameCanvas');
            const ctx = canvas.getContext('2d');
            
            // Adjust canvas size
            const rect = canvas.getBoundingClientRect();
            canvas.width = rect.width;
            canvas.height = rect.height;
            
            gameState = {
                boat: { x: canvas.width / 2, y: canvas.height - 80, width: 40, height: 50 },
                obstacles: [],
                treasures: [],
                score: 0,
                treasureCount: 0,
                speed: 3,
                running: true,
                keys: { left: false, right: false }
            };
            
            // Controls
            document.onkeydown = (e) => {
                if (e.key === 'ArrowLeft') gameState.keys.left = true;
                if (e.key === 'ArrowRight') gameState.keys.right = true;
            };
            document.onkeyup = (e) => {
                if (e.key === 'ArrowLeft') gameState.keys.left = false;
                if (e.key === 'ArrowRight') gameState.keys.right = false;
            };
            
            // Touch controls
            canvas.ontouchstart = (e) => {
                const touch = e.touches[0];
                const rect = canvas.getBoundingClientRect();
                const x = touch.clientX - rect.left;
                if (x < canvas.width / 2) gameState.keys.left = true;
                else gameState.keys.right = true;
            };
            canvas.ontouchend = () => {
                gameState.keys.left = false;
                gameState.keys.right = false;
            };
            
            gameLoop = requestAnimationFrame(() => updateGame(canvas, ctx));
        }

        function updateGame(canvas, ctx) {
            if (!gameState.running) return;
            
            const gs = gameState;
            
            // Move boat
            if (gs.keys.left && gs.boat.x > 10) gs.boat.x -= 6;
            if (gs.keys.right && gs.boat.x < canvas.width - gs.boat.width - 10) gs.boat.x += 6;
            
            // Spawn obstacles
            if (Math.random() < 0.02) {
                gs.obstacles.push({
                    x: Math.random() * (canvas.width - 40),
                    y: -40,
                    width: 30 + Math.random() * 20,
                    height: 30 + Math.random() * 20
                });
            }
            
            // Spawn treasures
            if (Math.random() < 0.008) {
                gs.treasures.push({
                    x: Math.random() * (canvas.width - 30),
                    y: -30,
                    width: 30,
                    height: 30
                });
            }
            
            // Update obstacles
            gs.obstacles = gs.obstacles.filter(o => {
                o.y += gs.speed;
                return o.y < canvas.height;
            });
            
            // Update treasures
            gs.treasures = gs.treasures.filter(t => {
                t.y += gs.speed * 0.8;
                return t.y < canvas.height;
            });
            
            // Collision with obstacles
            for (let o of gs.obstacles) {
                if (checkCollision(gs.boat, o)) {
                    gameOver();
                    return;
                }
            }
            
            // Collision with treasures
            for (let i = gs.treasures.length - 1; i >= 0; i--) {
                if (checkCollision(gs.boat, gs.treasures[i])) {
                    gs.treasures.splice(i, 1);
                    gs.treasureCount++;
                    gs.score += 100;
                    showRandomCity();
                    return;
                }
            }
            
            // Increase score
            gs.score += 1;
            gs.speed = 3 + Math.floor(gs.score / 500) * 0.5;
            
            // Draw
            drawGame(canvas, ctx);
            
            document.getElementById('gameScore').textContent = gs.score;
            document.getElementById('treasureCount').textContent = gs.treasureCount;
            
            gameLoop = requestAnimationFrame(() => updateGame(canvas, ctx));
        }

        function drawGame(canvas, ctx) {
            const gs = gameState;
            
            // Background with flowing water effect
            const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
            gradient.addColorStop(0, '#0369a1');
            gradient.addColorStop(0.5, '#0284c7');
            gradient.addColorStop(1, '#0ea5e9');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Water lines
            ctx.strokeStyle = 'rgba(255,255,255,0.2)';
            ctx.lineWidth = 2;
            for (let i = 0; i < 10; i++) {
                const y = (Date.now() / 20 + i * 60) % canvas.height;
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.bezierCurveTo(canvas.width/3, y-10, canvas.width*2/3, y+10, canvas.width, y);
                ctx.stroke();
            }
            
            // Draw obstacles (rocks)
            gs.obstacles.forEach(o => {
                ctx.fillStyle = '#4b5563';
                ctx.beginPath();
                ctx.ellipse(o.x + o.width/2, o.y + o.height/2, o.width/2, o.height/2, 0, 0, Math.PI * 2);
                ctx.fill();
                ctx.fillStyle = '#6b7280';
                ctx.beginPath();
                ctx.ellipse(o.x + o.width/2 - 5, o.y + o.height/2 - 5, o.width/4, o.height/4, 0, 0, Math.PI * 2);
                ctx.fill();
            });
            
            // Draw treasures
            gs.treasures.forEach(t => {
                ctx.font = '28px sans-serif';
                ctx.fillText('ğŸ', t.x, t.y + 28);
            });
            
            // Draw boat
            ctx.font = '40px sans-serif';
            ctx.fillText('ğŸ›¶', gs.boat.x, gs.boat.y + 40);
        }

        function checkCollision(a, b) {
            return a.x < b.x + b.width &&
                   a.x + a.width > b.x &&
                   a.y < b.y + b.height &&
                   a.y + a.height > b.y;
        }

        function showRandomCity() {
            gameState.running = false;
            
            const city = cities[Math.floor(Math.random() * cities.length)];
            discovered.push(city);
            
            document.getElementById('popupEmoji').textContent = city.emoji;
            document.getElementById('popupCityName').textContent = city.name;
            document.getElementById('popupCityDesc').textContent = city.catchphrase + 'ã€€' + city.description.slice(0, 50) + '...';
            document.getElementById('cityPopup').classList.remove('hidden');
        }

        function closeCityPopup() {
            document.getElementById('cityPopup').classList.add('hidden');
            gameState.running = true;
            const canvas = document.getElementById('gameCanvas');
            const ctx = canvas.getContext('2d');
            gameLoop = requestAnimationFrame(() => updateGame(canvas, ctx));
        }

        function gameOver() {
            gameState.running = false;
            document.getElementById('gamePlay').classList.add('hidden');
            document.getElementById('gameOver').classList.remove('hidden');
            document.getElementById('finalScore').textContent = gameState.score + 'ç‚¹';
            document.getElementById('discoveredCities').textContent = discovered.length;
            
            if (discovered.length > 0) {
                const uniqueCities = [...new Set(discovered.map(c => c.id))].map(id => cities.find(c => c.id === id));
                document.getElementById('discoveredList').innerHTML = `
                    <p class="text-sm text-gray-500 mb-2">ç™ºè¦‹ã—ãŸå¸‚ç”ºæ‘ï¼š</p>
                    ${uniqueCities.map(c => `
                        <button onclick="closeGame(); showCityDetail(${c.id})" class="block w-full text-left px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded mb-1 text-sm">
                            ${c.emoji} ${c.name}
                        </button>
                    `).join('')}
                `;
            } else {
                document.getElementById('discoveredList').innerHTML = '';
            }
        }
    </script>
</body>
</html>
